# テスト計画書

## 1. 概要

### 1.1 目的
本書は、社内業務管理システムの品質保証を目的とした、画面単位のテスト計画を定義するものです。

### 1.2 テスト範囲
- 全画面の機能テスト
- ユーザー権限別のアクセス制御テスト
- データの作成・読取・更新・削除（CRUD）操作
- 画面間の連携動作
- エラー処理とバリデーション

### 1.3 テスト環境
- **ブラウザ**: Chrome最新版、Safari最新版、Edge最新版
- **デバイス**: デスクトップ（1920x1080）、タブレット（768px）、モバイル（375px）
- **データベース**: PostgreSQL（Neon）テスト環境
- **認証**: 管理者アカウントと一般ユーザーアカウント

## 2. テストアカウント

| 役割 | ユーザー名 | メールアドレス | パスワード | 権限 |
|-----|----------|------------|-----------|-----|
| 管理者 | admin | admin@example.com | Admin123! | 全機能アクセス可能 |
| 一般ユーザー1 | user01 | user01@example.com | User123! | 一般権限 |
| 一般ユーザー2 | user02 | user02@example.com | User123! | 一般権限 |
| 非アクティブ | inactive | inactive@example.com | Inactive123! | ログイン不可 |

## 3. 画面別テスト計画

### 3.1 認証関連画面

#### 3.1.1 ログイン画面（/login）

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | 正しい認証情報でログイン | ダッシュボードへ遷移 | 高 |
| 2 | 誤ったパスワードでログイン | エラーメッセージ表示 | 高 |
| 3 | 存在しないメールアドレスでログイン | エラーメッセージ表示 | 高 |
| 4 | 非アクティブユーザーでログイン | ログイン拒否 | 高 |
| 5 | 必須フィールド未入力で送信 | バリデーションエラー表示 | 中 |
| 6 | メールアドレス形式チェック | 不正な形式の拒否 | 中 |
| 7 | パスワード表示/非表示切替 | アイコンクリックで切替 | 低 |
| 8 | Enterキーでフォーム送信 | ログイン処理実行 | 低 |

### 3.2 メイン機能画面

#### 3.2.1 ダッシュボード（/dashboard）

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | ダッシュボード表示 | 統計情報の正常表示 | 高 |
| 2 | 今日の予定表示 | 当日のスケジュール表示 | 高 |
| 3 | 最近の活動表示 | 直近の更新情報表示 | 中 |
| 4 | 各統計カードの数値確認 | DBデータとの一致 | 高 |
| 5 | クイックアクションリンク | 各画面への遷移確認 | 中 |
| 6 | レスポンシブデザイン | 画面幅での適切な表示 | 低 |

#### 3.2.2 ユーザー管理（/users）※管理者のみ

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | ユーザー一覧表示 | 全ユーザーの表示 | 高 |
| 2 | 新規ユーザー作成 | ユーザー登録成功 | 高 |
| 3 | ユーザー情報編集 | 情報更新成功 | 高 |
| 4 | ユーザー削除（物理削除） | ユーザー削除成功 | 高 |
| 5 | ユーザー名重複チェック | エラーメッセージ表示 | 高 |
| 6 | メールアドレス重複チェック | エラーメッセージ表示 | 高 |
| 7 | 社員番号重複チェック | エラーメッセージ表示 | 高 |
| 8 | パスワード強度チェック | 弱いパスワードの拒否 | 中 |
| 9 | 管理者権限の付与/剥奪 | 権限変更の反映 | 高 |
| 10 | ステータス変更（active/inactive） | ログイン可否の制御 | 高 |
| 11 | 検索フィルター機能 | 条件に合致したユーザー表示 | 中 |
| 12 | ページネーション | 正しいページ分割 | 低 |
| 13 | 一般ユーザーでのアクセス | アクセス拒否 | 高 |

#### 3.2.3 プロジェクト管理（/projects）

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | プロジェクト一覧表示 | 全プロジェクトの表示 | 高 |
| 2 | 新規プロジェクト作成 | プロジェクト登録成功 | 高 |
| 3 | プロジェクト情報編集 | 情報更新成功 | 高 |
| 4 | プロジェクト削除 | 削除確認後、削除成功 | 高 |
| 5 | プロジェクト番号重複チェック | エラーメッセージ表示 | 高 |
| 6 | ステータスフィルター | 選択ステータスのみ表示 | 中 |
| 7 | プロジェクト検索 | 検索条件に合致した表示 | 中 |
| 8 | 日付入力バリデーション | 不正な日付の拒否 | 中 |
| 9 | 終了日＜開始日のチェック | エラーメッセージ表示 | 中 |
| 10 | プロジェクト詳細表示 | 関連課題・スケジュール表示 | 低 |

#### 3.2.4 予定実績管理（/schedules）

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | スケジュール一覧表示 | 自分のスケジュール表示 | 高 |
| 2 | 新規スケジュール作成 | 予定・実績の登録成功 | 高 |
| 3 | スケジュール編集 | 情報更新成功 | 高 |
| 4 | スケジュール削除 | 削除成功 | 高 |
| 5 | 予定項目の追加/削除 | 動的な項目管理 | 高 |
| 6 | 実績項目の追加/削除 | 動的な項目管理 | 高 |
| 7 | プロジェクト紐付け | プロジェクト選択と保存 | 中 |
| 8 | 実績時間の入力 | 0.25時間単位での入力 | 中 |
| 9 | 出社/退社時刻入力 | 時刻形式のバリデーション | 中 |
| 10 | 所感の入力 | 長文テキストの保存 | 低 |
| 11 | 日付での絞り込み | 指定期間のデータ表示 | 中 |
| 12 | 他ユーザーのスケジュール閲覧 | 閲覧権限の確認 | 高 |

#### 3.2.5 カレンダー表示（/schedules/calendar）

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | カレンダー表示 | 当月のカレンダー表示 | 高 |
| 2 | 月切替機能 | 前月/翌月への移動 | 高 |
| 3 | 今日ボタン | 今日を含む月へジャンプ | 中 |
| 4 | スケジュールの表示 | 日付セルに予定表示 | 高 |
| 5 | スケジュール詳細表示 | クリックで詳細ポップアップ | 中 |
| 6 | スケジュール作成 | 日付クリックで新規作成 | 中 |
| 7 | ドラッグ&ドロップ | スケジュール日付変更 | 低 |
| 8 | 週表示/日表示切替 | 表示モード変更 | 低 |

#### 3.2.6 グラフ表示（/schedules/chart）

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | グラフ表示 | 実績データのグラフ化 | 高 |
| 2 | 期間選択 | 指定期間のデータ表示 | 高 |
| 3 | プロジェクト別集計 | プロジェクト別時間表示 | 高 |
| 4 | ユーザー別集計 | ユーザー別時間表示 | 中 |
| 5 | グラフ種類切替 | 棒/線/円グラフ切替 | 低 |
| 6 | データエクスポート | CSV/Excel出力 | 低 |
| 7 | 凡例表示/非表示 | 凡例の切替 | 低 |

#### 3.2.7 課題管理（/issues）

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | 課題一覧表示 | 全課題の表示 | 高 |
| 2 | 新規課題作成 | 課題登録成功 | 高 |
| 3 | 課題編集 | 情報更新成功 | 高 |
| 4 | 課題削除 | 削除成功 | 高 |
| 5 | ステータス変更 | ドロップダウンで変更 | 高 |
| 6 | 優先度変更 | 優先度の更新 | 高 |
| 7 | 担当者アサイン | 担当者の設定/変更 | 高 |
| 8 | コメント追加 | コメント投稿成功 | 高 |
| 9 | コメント編集/削除 | 自分のコメント管理 | 中 |
| 10 | ファイル添付 | ファイルアップロード | 低 |
| 11 | ステータスフィルター | 条件でのフィルタリング | 中 |
| 12 | 優先度フィルター | 優先度での絞り込み | 中 |
| 13 | プロジェクトフィルター | プロジェクト別表示 | 中 |
| 14 | 担当者フィルター | 担当者別表示 | 中 |
| 15 | キーワード検索 | タイトル/説明での検索 | 中 |
| 16 | 期限切れ課題の強調表示 | 視覚的な警告 | 中 |
| 17 | 課題IDクリック | 詳細ページへ遷移 | 高 |
| 18 | ガントチャート情報入力 | 開始日/終了日/進捗の設定 | 高 |

#### 3.2.8 課題詳細（/issues/[id]）

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | 課題詳細表示 | 全情報の表示 | 高 |
| 2 | インラインステータス変更 | 即座に更新 | 高 |
| 3 | インライン優先度変更 | 即座に更新 | 高 |
| 4 | インライン担当者変更 | 即座に更新 | 高 |
| 5 | コメント追加 | リアルタイム追加 | 高 |
| 6 | 編集ページへの遷移 | 編集画面表示 | 中 |
| 7 | 削除操作 | 確認後削除 | 中 |
| 8 | ガントチャート情報表示 | 進捗・日付の表示 | 高 |
| 9 | ガントチャートへのリンク | ガントチャート画面へ遷移 | 中 |
| 10 | 親タスクへのリンク | 親課題へ遷移 | 中 |
| 11 | 依存関係の表示 | 依存タスクリスト表示 | 低 |

#### 3.2.9 ガントチャート（/gantt）

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | ガントチャート表示 | タスクバーの表示 | 高 |
| 2 | タスク一覧表示（左パネル） | 課題名/担当者/進捗/日付表示 | 高 |
| 3 | 表示モード切替 | 日/週/月/四半期/年表示 | 高 |
| 4 | プロジェクトフィルター | プロジェクト別表示 | 高 |
| 5 | 担当者フィルター | 担当者別表示 | 高 |
| 6 | タスククリック | 課題詳細へ遷移 | 高 |
| 7 | 進捗率の視覚表示 | バー内の進捗表示 | 中 |
| 8 | ステータス別色分け | 色による状態識別 | 中 |
| 9 | 優先度の表示 | 高/緊急バッジ表示 | 中 |
| 10 | スクロール同期 | 左右パネルの同期 | 中 |
| 11 | ズームイン/アウト | 時間軸の拡大縮小 | 低 |
| 12 | 今日線の表示 | 現在日の視覚化 | 低 |
| 13 | 依存関係の表示 | 矢印での関係表示 | 低 |
| 14 | 背景色を白に設定確認 | 左表の背景が白色 | 中 |

### 3.3 共通機能

#### 3.3.1 サイドバー

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | メニュー項目クリック | 各画面への遷移 | 高 |
| 2 | アクティブ項目の強調 | 現在地の視覚表示 | 中 |
| 3 | サブメニューの展開/折畳み | 階層メニューの動作 | 中 |
| 4 | 権限によるメニュー制御 | 管理者メニューの表示制御 | 高 |
| 5 | モバイルでの表示/非表示 | ハンバーガーメニュー動作 | 中 |
| 6 | サイドバー折りたたみ | アイコンのみ表示モード | 中 |
| 7 | 折りたたみ時のツールチップ | メニュー名の表示 | 低 |

#### 3.3.2 ヘッダー

**テスト項目:**

| No | テスト内容 | 期待結果 | 優先度 |
|----|-----------|---------|--------|
| 1 | ユーザー名表示 | ログインユーザー名表示 | 高 |
| 2 | ユーザーメニュー | ドロップダウン表示 | 中 |
| 3 | ログアウト | セッション終了とログイン画面遷移 | 高 |
| 4 | プロフィール編集リンク | プロフィール画面遷移 | 低 |
| 5 | テーマ切替 | ライト/ダークモード切替 | 低 |

## 4. 権限テスト

### 4.1 管理者権限

| 機能 | アクセス可否 | 備考 |
|-----|------------|-----|
| ユーザー管理 | ○ | 全機能利用可能 |
| プロジェクト管理 | ○ | 作成・編集・削除可能 |
| 全ユーザーのスケジュール閲覧 | ○ | - |
| 全課題の編集・削除 | ○ | - |
| システム設定 | ○ | - |

### 4.2 一般ユーザー権限

| 機能 | アクセス可否 | 備考 |
|-----|------------|-----|
| ユーザー管理 | × | アクセス拒否 |
| プロジェクト管理 | △ | 閲覧のみ、編集不可 |
| 自分のスケジュール管理 | ○ | - |
| 他ユーザーのスケジュール | △ | 閲覧のみ |
| 課題作成・編集 | ○ | 自分が報告者/担当者の課題のみ |
| 課題削除 | △ | 自分が報告者の課題のみ |

## 5. エラーハンドリングテスト

### 5.1 ネットワークエラー

| テスト内容 | 期待動作 |
|-----------|---------|
| APIタイムアウト | エラーメッセージ表示とリトライオプション |
| ネットワーク切断 | オフライン通知 |
| 500エラー | エラー画面表示 |
| 404エラー | Not Found画面表示 |

### 5.2 バリデーションエラー

| テスト内容 | 期待動作 |
|-----------|---------|
| 必須項目未入力 | フィールドレベルエラー表示 |
| 文字数超過 | エラーメッセージと文字数表示 |
| 不正な形式 | フォーマットエラー表示 |
| 重複データ | 重複エラーメッセージ |

## 6. パフォーマンステスト

### 6.1 レスポンス時間

| 画面/機能 | 目標時間 | 許容時間 |
|----------|---------|---------|
| ログイン | 1秒以内 | 3秒以内 |
| 一覧画面表示 | 1秒以内 | 3秒以内 |
| データ作成/更新 | 1秒以内 | 3秒以内 |
| 検索・フィルタリング | 0.5秒以内 | 2秒以内 |
| ページ遷移 | 0.5秒以内 | 1秒以内 |

### 6.2 データ量テスト

| テスト項目 | データ量 | 期待動作 |
|-----------|---------|---------|
| ユーザー一覧 | 1000件 | ページネーション動作 |
| 課題一覧 | 5000件 | スムーズなスクロール |
| ガントチャート | 500タスク | 描画完了3秒以内 |
| カレンダー | 1ヶ月100件 | 正常表示 |

## 7. ブラウザ互換性テスト

### 7.1 対応ブラウザ

| ブラウザ | バージョン | 優先度 |
|---------|-----------|--------|
| Chrome | 最新版 | 高 |
| Safari | 最新版 | 高 |
| Edge | 最新版 | 中 |
| Firefox | 最新版 | 中 |

### 7.2 レスポンシブデザイン

| デバイス | 解像度 | テスト項目 |
|---------|--------|-----------|
| デスクトップ | 1920x1080 | 全機能の表示確認 |
| タブレット | 768x1024 | レイアウト崩れ確認 |
| スマートフォン | 375x667 | タッチ操作確認 |

## 8. セキュリティテスト

### 8.1 認証・認可

| テスト項目 | 確認内容 |
|-----------|---------|
| セッションタイムアウト | 一定時間後の自動ログアウト |
| 同時ログイン制御 | 複数デバイスからのログイン |
| CSRF対策 | トークンによる保護 |
| XSS対策 | スクリプトインジェクション防止 |

### 8.2 データ保護

| テスト項目 | 確認内容 |
|-----------|---------|
| パスワード暗号化 | bcryptハッシュ化確認 |
| HTTPS通信 | 全通信の暗号化 |
| SQLインジェクション | Prismaによる防御 |

## 9. テスト実施スケジュール

### 9.1 フェーズ1: 基本機能テスト（優先度: 高）
- 期間: 3日間
- 対象: ログイン、CRUD操作、権限制御

### 9.2 フェーズ2: 統合テスト（優先度: 中）
- 期間: 2日間
- 対象: 画面間連携、フィルター、検索

### 9.3 フェーズ3: 非機能テスト（優先度: 低）
- 期間: 2日間
- 対象: パフォーマンス、互換性、セキュリティ

## 10. 不具合管理

### 10.1 優先度定義

| 優先度 | 説明 | 対応期限 |
|--------|-----|---------|
| 緊急 | システム停止、データ損失の可能性 | 即日 |
| 高 | 主要機能が使用不可 | 2日以内 |
| 中 | 代替手段あり、業務への影響中程度 | 1週間以内 |
| 低 | 軽微な表示崩れ、改善要望 | 次回リリース |

### 10.2 不具合報告フォーマット

```
【発生日時】
【発生環境】
【再現手順】
【期待動作】
【実際の動作】
【スクリーンショット】
【優先度】
【補足情報】
```

## 11. テスト完了基準

### 11.1 完了条件
- 優先度「高」のテスト項目: 100%実施
- 優先度「中」のテスト項目: 90%以上実施
- 優先度「低」のテスト項目: 70%以上実施
- 緊急・高優先度の不具合: 0件
- 中優先度の不具合: 5件以下

### 11.2 リリース判定
- テスト完了基準を満たすこと
- ステークホルダーによる受入テスト合格
- 本番環境でのスモークテスト成功

## 12. 付録

### 12.1 テストデータ
- プロジェクト: 最低10件
- ユーザー: 最低20名
- 課題: 最低100件
- スケジュール: 3ヶ月分

### 12.2 ツール
- テスト管理: スプレッドシート
- 不具合管理: GitHub Issues
- スクリーンショット: 標準ツール
- ブラウザテスト: BrowserStack（オプション）

### 12.3 参考資料
- 機能要件定義書（02_functional_requirements.md）
- データベース設計書（03_database_design.md）
- 開発計画書（04_mock_development_plan.md）